{% extends "base.html" %}
{% block title %}Friend Compare{% endblock %}

{% block content %}
  <div class="card">
    <h1>Friend Compare</h1>
    <p class="text-muted">Compare your game library and preferences with a friend's Steam account.</p>
  </div>

  <div class="form-container">
    <form method="POST">
      {{ form.hidden_tag() }}
      <div class="form-group">
        {{ form.friend_steam.label(class="form-label") }}
        {{ form.friend_steam(class="form-input", placeholder="Friend's Steam ID, profile URL, or username") }}
        {% if form.friend_steam.errors %}
          {% for error in form.friend_steam.errors %}
            <div class="alert alert-error" style="margin-top: 8px; font-size: 12px;">{{ error }}</div>
          {% endfor %}
        {% endif %}
      </div>
      {{ form.submit(class="btn btn-primary form-submit") }}
    </form>
  </div>

  {% if result %}
    <div class="card">
      <h2>Comparison Results</h2>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
        <div style="background: var(--steam-darker); padding: 20px; border-radius: 4px; border: 1px solid var(--steam-border);">
          <div style="color: var(--steam-text-muted); font-size: 14px; margin-bottom: 8px;">Library Overlap</div>
          <div style="color: var(--steam-blue); font-size: 32px; font-weight: 600;">{{ result.overlap_percent }}%</div>
        </div>
        <div style="background: var(--steam-darker); padding: 20px; border-radius: 4px; border: 1px solid var(--steam-border);">
          <div style="color: var(--steam-text-muted); font-size: 14px; margin-bottom: 8px;">Taste Similarity</div>
          <div style="color: var(--steam-blue); font-size: 32px; font-weight: 600;">{{ "%.3f"|format(result.similarity) }}</div>
        </div>
        <div style="background: var(--steam-darker); padding: 20px; border-radius: 4px; border: 1px solid var(--steam-border);">
          <div style="color: var(--steam-text-muted); font-size: 14px; margin-bottom: 8px;">Shared Games</div>
          <div style="color: var(--steam-text-light); font-size: 32px; font-weight: 600;">{{ result.shared_count }}</div>
        </div>
      </div>
      <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--steam-border);">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
          <div>
            <div style="color: var(--steam-text-muted); font-size: 13px;">Your Games</div>
            <div style="color: var(--steam-text-light); font-size: 18px; font-weight: 500;">{{ result.my_count }}</div>
          </div>
          <div>
            <div style="color: var(--steam-text-muted); font-size: 13px;">Friend's Games</div>
            <div style="color: var(--steam-text-light); font-size: 18px; font-weight: 500;">{{ result.friend_count }}</div>
          </div>
          <div>
            <div style="color: var(--steam-text-muted); font-size: 13px;">Friend SteamID64</div>
            <div style="color: var(--steam-text-light); font-size: 14px; word-break: break-all;">{{ result.friend_steamid64 }}</div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
{% endblock %}
